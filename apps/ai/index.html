<!-- Unblockify AI App -->

<div class="ai-shell">
  <button class="crtBtn ai-back">← Back</button>

  <div class="ai-chatbox"></div>

  <div class="input-area">
    <input class="ai-input" type="text" placeholder="Ask Unblockify AI…" />
    <button class="ai-send">Send</button>
  </div>

  <div class="ai-footer">thanks, from M ✌️</div>
</div>


<script>
(() => {
  const shell = document.querySelector(".ai-shell");
  if (!shell) return;

  const chatbox = shell.querySelector(".ai-chatbox");
  const input = shell.querySelector(".ai-input");
  const sendBtn = shell.querySelector(".ai-send");
  const backBtn = shell.querySelector(".ai-back");

  let conversation = [];

  function displayMessage(text, isUser) {
    const msg = document.createElement("div");
    msg.className =
      "chat-message " + (isUser ? "user-message" : "assistant-message");
    msg.textContent = text;
    chatbox.appendChild(msg);
    chatbox.scrollTop = chatbox.scrollHeight;
  }

  async function sendMessage() {
    const message = input.value.trim();
    if (!message) return;

    displayMessage(message, true);
    input.value = "";

    conversation.push({ role: "user", content: message });

    const prompt =
`You are Unblockify AI (U-Know AI).
You help with games, site features, and general questions.
Be concise, friendly, and helpful.

Conversation:
${conversation.map(m => m.content).join("\n")}`;

    try {
      const res = await fetch(
        "https://backend.buildpicoapps.com/aero/run/llm-api?pk=YOUR_KEY_HERE",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt })
        }
      );

      const data = await res.json();
      if (data.status === "success") {
        displayMessage(data.text, false);
        conversation.push({ role: "assistant", content: data.text });
      } else {
        displayMessage("Something went wrong.", false);
      }
    } catch {
      displayMessage("Connection error.", false);
    }
  }

  sendBtn.onclick = sendMessage;
  input.addEventListener("keydown", e => {
    if (e.key === "Enter") sendMessage();
  });

  backBtn.onclick = () => {
    shell.remove();
  };
})();
</script>

